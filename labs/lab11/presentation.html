<h1 id="информация">Информация</h1>
<h2 id="докладчик">Докладчик</h2>
<div class="columns" data-align="center">
<div class="column" style="width:60%;">
<ul>
<li>Игнатенкова Варвара Николаевна</li>
<li>студентка</li>
<li>Российский университет дружбы народов</li>
<li><a href="mailto:1132226497@pfur.ru">1132226497@pfur.ru</a></li>
<li><a href="https://github.com/vnignatenkovarudn"
class="uri">https://github.com/vnignatenkovarudn</a></li>
</ul>
</div><div class="column" style="width:25%;">
<p><img src="./image/photo.jpg" /></p>
</div>
</div>
<h2 id="цель-работы">Цель работы</h2>
<p>Реализовать модель <span
class="math inline"><em>M</em>|<em>M</em>|1</span> в CPN tools.</p>
<h2 id="задание">Задание</h2>
<ul>
<li>Реализовать в CPN Tools модель системы массового обслуживания
M|M|1.</li>
<li>Настроить мониторинг параметров моделируемой системы и нарисовать
графики очереди.</li>
</ul>
<h2 id="выполнение-лабораторной-работы">Выполнение лабораторной
работы</h2>
<p>В систему поступает поток заявок двух типов, распределённый по
пуассоновскому закону. Заявки поступают в очередь сервера на обработку.
Дисциплина очереди - FIFO. Если сервер находится в режиме ожидания (нет
заявок на сервере), то заявка поступает на обработку сервером.</p>
<p>Будем использовать три отдельных листа: на первом листе опишем граф
системы, на втором — генератор заявок, на третьем — сервер обработки
заявок.</p>
<h2 id="выполнение-лабораторной-работы-1">Выполнение лабораторной
работы</h2>
<p>Сеть имеет 2 позиции (очередь — <code>Queue</code>, обслуженные
заявки — <code>Complited</code>) и два перехода (генерировать заявку —
<code>Arrivals</code>, передать заявку на обработку сер- веру —
<code>Server</code>). Переходы имеют сложную иерархическую структуру,
задаваемую на отдельных листах модели (с помощью соответствующего
инструмента меню — Hierarchy).</p>
<p>Между переходом <code>Arrivals</code> и позицией <code>Queue</code>,
а также между позицией <code>Queue</code> и переходом
<code>Server</code> установлена дуплексная связь. Между переходом
<code>Server</code> и позицией <code>Complited</code> — односторонняя
связь.</p>
<h2 id="выполнение-лабораторной-работы-2">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/1.png" id="fig:001" style="width:70.0%"
alt="Граф сети системы обработки заявок в очереди" />
<figcaption aria-hidden="true">Граф сети системы обработки заявок в
очереди</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-3">Выполнение лабораторной
работы</h2>
<p>Граф генератора заявок имеет 3 позиции (текущая заявка —
<code>Init</code>, следующая заявка — <code>Next</code>, очередь —
<code>Queue</code> из листа <code>System</code>) и 2 перехода
(<code>Init</code> — определяет распределение поступления заявок по
экспоненциальному закону с интенсивностью 100 заявок в единицу времени,
<code>Arrive</code> — определяет поступление заявок в очередь).</p>
<h2 id="выполнение-лабораторной-работы-4">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/3.png" id="fig:002" style="width:70.0%"
alt="Граф генератора заявок системы" />
<figcaption aria-hidden="true">Граф генератора заявок
системы</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-5">Выполнение лабораторной
работы</h2>
<p>Граф процесса обработки заявок на сервере имеет 4 позиции
(<code>Busy</code> — сервер занят, <code>Idle</code> — сервер в режиме
ожидания, <code>Queue</code> и <code>Complited</code> из листа
<code>System</code>) и 2 перехода (<code>Start</code> — начать обработку
заявки, <code>Stop</code> — закончить обработку заявки).</p>
<h2 id="выполнение-лабораторной-работы-6">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/2.png" id="fig:003" style="width:70.0%"
alt="Граф процесса обработки заявок на сервере системы" />
<figcaption aria-hidden="true">Граф процесса обработки заявок на сервере
системы</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-7">Выполнение лабораторной
работы</h2>
<p>Зададим декларации системы.</p>
<p>Определим множества цветов системы (colorset) и переменные модели, а
также определим функции системы.</p>
<h2 id="выполнение-лабораторной-работы-8">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/declaration.png" id="fig:004" style="width:70.0%"
alt="Задание деклараций системы" />
<figcaption aria-hidden="true">Задание деклараций системы</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-9">Выполнение лабораторной
работы</h2>
<p>Зададим параметры модели на графах сети.</p>
<p>На листе <code>System</code> (рис. <span class="citation"
data-cites="fig:005">[-@fig:005]</span>):</p>
<ul>
<li>у позиции Queue множество цветов фишек — <code>Jobs</code>;
начальная маркировка <code>1[]</code> определяет, что изначально очередь
пуста.</li>
<li>у позиции <code>Completed</code> множество цветов фишек —
<code>Job</code>.</li>
</ul>
<h2 id="выполнение-лабораторной-работы-10">Выполнение лабораторной
работы</h2>
<p>На листе Arrivals:</p>
<ul>
<li>у позиции <code>Init</code>: множество цветов фишек —
<code>UNIT</code>; начальная маркировка <code>1``()@0</code> определяет,
что поступление заявок в систему начинается с нулевого момента
времени;</li>
<li>у позиции <code>Next</code>: множество цветов фишек —
<code>UNIT</code>;</li>
<li>на дуге от позиции <code>Init</code> к переходу <code>Init</code>
выражение () задаёт генерацию заявок;</li>
<li>на дуге от переходов <code>Init</code> и Arrive к позиции Next
выражение <code>()@+expTime(100)</code> задаёт экспоненциальное
распределение времени между поступлениями заявок;</li>
<li>на дуге от позиции <code>Next</code> к переходу <code>Arrive</code>
выражение () задаёт перемещение фишки;</li>
<li>на дуге от перехода <code>Arrive</code> к позиции Queue выражение
<code>jobs^^[job]</code> задает поступление заявки в очередь;</li>
<li>на дуге от позиции <code>Queue</code> к переходу <code>Arrive</code>
выражение <code>jobs</code> задаёт обратную связь.</li>
</ul>
<h2 id="выполнение-лабораторной-работы-11">Выполнение лабораторной
работы</h2>
<p>На листе Server:</p>
<ul>
<li>у позиции <code>Busy</code>: множество цветов фишек —
<code>Server</code>, начальное значение мар- кировки —
<code>1``server@0</code> определяет, что изначально на сервере нет
заявок на обслуживание;</li>
<li>у позиции <code>Idle</code>: множество цветов фишек —
<code>ServerxJob</code>;</li>
<li>переход <code>Start</code> имеет сегмент кода
<code>output (proctime); action expTime(90);</code> определяющий, что
время обслуживания заявки распределено по экспоненциальному закону со
средним временем обработки в 90 единиц времени;</li>
<li>на дуге от позиции <code>Queue</code> к переходу <code>Start</code>
выражение <code>job::jobs</code> определяет, что сервер может начать
обработку заявки, если в очереди есть хотя бы одна заявка;</li>
<li>на дуге от перехода <code>Start</code> к позиции Busy выражение
<code>(server,job)@+proctime</code> запускает функцию расчёта времени
обработки заявки на сервере;</li>
<li>на дуге от позиции <code>Busy</code> к переходу <code>Stop</code>
выражение <code>(server,job)</code> говорит о завершении обработки
заявки на сервере;</li>
<li>на дуге от перехода <code>Stop</code> к позиции
<code>Completed</code> выражение <code>job</code> показывает, что заявка
считается обслуженной;</li>
<li>выражение server на дугах от и к позиции <code>Idle</code>
определяет изменение состояние сервера (обрабатывает заявки или
ожидает);</li>
<li>на дуге от перехода <code>Start</code> к позиции <code>Queue</code>
выражение <code>jobs</code> задаёт обратную связь.</li>
</ul>
<h2 id="выполнение-лабораторной-работы-12">Выполнение лабораторной
работы</h2>
<p><strong>Мониторинг параметров моделируемой системы</strong></p>
<p>Потребуется палитра Monitoring. Выбираем Break Point (точка останова)
и устанавливаем её на переход Start. После этого в разделе меню Monitor
появится новый подраздел, который назовём Ostanovka. В этом подразделе
необходимо внести изменения в функцию Predicate, которая будет
выполняться при запуске монитора. Зададим число шагов, через которое
будем останавливать мониторинг. Для этого true заменим на
Queue_Delay.count()=200.</p>
<h2 id="выполнение-лабораторной-работы-13">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/4.png" id="fig:008" style="width:70.0%"
alt="Функция Predicate монитора Ostanovka" />
<figcaption aria-hidden="true">Функция Predicate монитора
Ostanovka</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-14">Выполнение лабораторной
работы</h2>
<p>Необходимо определить конструкцию Queue_Delay.count(). С помощью
палитры Monitoring выбираем Data Call и устанавливаем на переходе Start.
Появившийся в меню монитор называем Queue Delay (без подчеркивания).
Функция Observer выполняется тогда, когда функция предикатора выдаёт
значение true. По умолчанию функция выдаёт 0 или унарный минус (~1),
подчёркивание обозначает произвольный аргумент. Изменим её так, чтобы
получить значение задержки в очереди. Для этого необходимо из текущего
времени intTime() вычесть временную метку AT , означающую приход заявки
в очередь.</p>
<h2 id="выполнение-лабораторной-работы-15">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/5.png" id="fig:009" style="width:70.0%"
alt="Функция Observer монитора Queue Delay" />
<figcaption aria-hidden="true">Функция Observer монитора Queue
Delay</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-16">Выполнение лабораторной
работы</h2>
<p>После запуска программы на выполнение в каталоге с кодом программы
появится файл Queue_Delay.log, содержащий в первой колонке — значение
задержки очереди, во второй — счётчик, в третьей — шаг, в четвёртой —
время.</p>
<h2 id="выполнение-лабораторной-работы-17">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/queue_delay.png" id="fig:010" style="width:70.0%"
alt="Файл Queue_Delay.log" />
<figcaption aria-hidden="true">Файл Queue_Delay.log</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-18">Выполнение лабораторной
работы</h2>
<p>С помощью gnuplot можно построить график значений задержки в
очереди.</p>
<h2 id="выполнение-лабораторной-работы-19">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/plot1.png" id="fig:011" style="width:70.0%"
alt="График изменения задержки в очереди" />
<figcaption aria-hidden="true">График изменения задержки в
очереди</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-20">Выполнение лабораторной
работы</h2>
<p>Посчитаем задержку в действительных значениях. С помощью палитры
Monitoring выбираем Data Call и устанавливаем на переходе Start.
Появившийся в меню монитор называем Queue Delay Real. Функцию Observer
изменим следующим образом.</p>
<h2 id="выполнение-лабораторной-работы-21">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/6.png" id="fig:012" style="width:70.0%"
alt="Функция Observer монитора Queue Delay Real" />
<figcaption aria-hidden="true">Функция Observer монитора Queue Delay
Real</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-22">Выполнение лабораторной
работы</h2>
<p>По сравнению с предыдущим описанием функции добавлено преобразование
значения функции из целого в действительное, при этом obsBindElem _
принимает значение ~1.0. После запуска программы на выполнение в
каталоге с кодом программы появится файл Queue_Delay_Real.log с
содержимым, аналогичным содержимому файла Queue_Delay.log, но значения
задержки имеют действительный тип.</p>
<h2 id="выполнение-лабораторной-работы-23">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/queue_delay_real.png" id="fig:013" style="width:70.0%"
alt="Содержимое Queue_Delay_Real.log" />
<figcaption aria-hidden="true">Содержимое
Queue_Delay_Real.log</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-24">Выполнение лабораторной
работы</h2>
<p>Посчитаем, сколько раз задержка превысила заданное значение. С
помощью палитры Monitoring выбираем Data Call и устанавливаем на
переходе Start. Монитор называем Long Delay Time. Функцию Observer
изменим следующим образом.</p>
<h2 id="выполнение-лабораторной-работы-25">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/7.png" id="fig:014" style="width:70.0%"
alt="Функция Observer монитора Long Delay Time" />
<figcaption aria-hidden="true">Функция Observer монитора Long Delay
Time</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-26">Выполнение лабораторной
работы</h2>
<p>При этом необходимо в декларациях задать глобальную переменную (в
форме ссылки на число 200): longdelaytime.</p>
<p>После запуска программы на выполнение в каталоге с кодом программы
появится файл Long_Delay_Time.log.</p>
<h2 id="выполнение-лабораторной-работы-27">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/long_delay.png" id="fig:016" style="width:70.0%"
alt="Содержимое Long_Delay_Time.log" />
<figcaption aria-hidden="true">Содержимое
Long_Delay_Time.log</figcaption>
</figure>
<h2 id="выполнение-лабораторной-работы-28">Выполнение лабораторной
работы</h2>
<p>С помощью gnuplot можно построить график, демонстрирующий, в какие
периоды времени значения задержки в очереди превышали заданное значение
200.</p>
<h2 id="выполнение-лабораторной-работы-29">Выполнение лабораторной
работы</h2>
<figure>
<img src="image/plot2.png" id="fig:017" style="width:70.0%"
alt="Периоды времени, когда значения задержки в очереди превышали заданное значение" />
<figcaption aria-hidden="true">Периоды времени, когда значения задержки
в очереди превышали заданное значение</figcaption>
</figure>
<h2 id="выводы">Выводы</h2>
<p>МВ процессе выполнения данной лабораторной работы я реализовала
модель системы массового обслуживания <span
class="math inline"><em>M</em>|<em>M</em>|1</span> в CPN Tools.ы
построили модель задачи о мудрецах с помощью CPNTools и проанализировали
результат.</p>
